webpackJsonp([5],{1135:function(e,t,l){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=l(419),c=s(n),o=function(e){return function(t){var l=e(t);return(0,c["default"])(l,t),l}};t["default"]=o},1147:function(e,t,l){"use strict";e.exports=l(1148)},1148:function(e,t,l){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){e.params,e.loadContext;return void t()}Object.defineProperty(t,"__esModule",{value:!0});var c=l(197),o=s(c),a=l(810),i=s(a),r=l(807),u=s(r),d=l(808),f=s(d),h=l(1135),p=s(h),m=l(917),v=s(m),b=l(815),S=s(b),P=l(864),y=s(P),E=l(834);l(848),l(954),l(956),l(1120);var g=l(676),_=l(1017),C=s(_),q=l(1126),D=s(q),F=l(887),R=s(F),x=l(1142),M=s(x),j=l(699),T=l(802),w=l(979),k=l(1149),A=s(k),J=(0,j.normalizeResponse)("searchCollections"),L=20,N=(0,p["default"])((0,S["default"])((0,i["default"])("SearchCollections"),(0,u["default"])({actions:c.PropTypes.object.isRequired,api:c.PropTypes.object.isRequired,search:c.PropTypes.object.isRequired}),(0,v["default"])({componentDidMount:function(){var e=this.props,t=e.actions,l=e.api,s=e.search;this.fetch=(0,y["default"])(function(e,t,s){l.search.collections(e,t,L).then(g.toJson).then(J).then(s)},w.SEARCH_DELAY),this.resetData=function(e){var l=e.entities,s=e.result;t.updateData(l),t.resetSearchResults({collections:{total:s.total,results:s.results,maxPage:s.total_pages,lastPageFetched:1,isLoading:!1}})},this.fetch(s.query,1,this.resetData),this.addScrollSubscription()},componentWillReceiveProps:function(e){e.search.query!==this.props.search.query&&this.fetch(e.search.query,1,this.resetData)},addScrollSubscription:function(){var e=this,t=E.Observable.fromEvent(window,"scroll").filter(function(){return(0,T.shouldFetchMoreContent)()}).map(function(){return e.props.search.collections.lastPageFetched}).distinct();this.scrollSubscription=t.subscribe(this.fetchCollections)},fetchCollections:function(){var e=this.props,t=e.search,l=e.actions,s=t.collections,n=s.maxPage,c=s.lastPageFetched;if(!(c>n)){var o=c+1;this.fetch(t.query,o,function(e){var t=e.entities,s=e.result;l.updateData(t),l.addCollectionsToSearchCollectionFeed({lastPageFetched:o,collectionIds:s.results})})}},removeScrollSubscription:function(){this.scrollSubscription.unsubscribe(),this.fetchSubscription&&this.fetchSubscription.unsubscribe()},componentWillUnmount:function(){this.removeScrollSubscription()}}),(0,f["default"])("loadProps",n)));t["default"]=N(function(e){var t=e.search,l=t.collections,s=l.results,n=l.maxPage,c=l.total,a=l.lastPageFetched;return 0===c?o["default"].createElement("div",null,o["default"].createElement(M["default"],{type:"collections"})):o["default"].createElement("div",null,o["default"].createElement("div",{className:A["default"].container},o["default"].createElement("div",{className:A["default"].clearfix},s.map(function(e){return o["default"].createElement(C["default"],{key:e.id,collection:e,columns:3})})),a<n?o["default"].createElement(R["default"],null):null,o["default"].createElement(D["default"],null)))})}});
//# sourceMappingURL=5.a526b.main.js.map